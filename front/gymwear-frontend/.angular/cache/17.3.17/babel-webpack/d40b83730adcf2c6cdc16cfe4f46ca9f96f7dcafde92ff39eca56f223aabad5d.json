{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport class CartService {\n  constructor() {\n    this.cartItems = [];\n    this.cartSubject = new BehaviorSubject([]);\n    this.cart$ = this.cartSubject.asObservable();\n    // Cargar carrito desde localStorage\n    const storedCart = localStorage.getItem('cart');\n    if (storedCart) {\n      this.cartItems = JSON.parse(storedCart);\n      this.cartSubject.next(this.cartItems);\n    }\n  }\n  addToCart(product, quantity = 1, size, color) {\n    const existingItem = this.cartItems.find(item => item.product.id === product.id && item.size === size && item.color === color);\n    if (existingItem) {\n      existingItem.quantity += quantity;\n    } else {\n      this.cartItems.push({\n        product,\n        quantity,\n        size,\n        color\n      });\n    }\n    this.updateCart();\n  }\n  removeFromCart(index) {\n    this.cartItems.splice(index, 1);\n    this.updateCart();\n  }\n  updateQuantity(index, quantity) {\n    if (quantity <= 0) {\n      this.removeFromCart(index);\n    } else {\n      this.cartItems[index].quantity = quantity;\n      this.updateCart();\n    }\n  }\n  clearCart() {\n    this.cartItems = [];\n    this.updateCart();\n  }\n  getCartItems() {\n    return this.cartItems;\n  }\n  getCartCount() {\n    return this.cartItems.reduce((total, item) => total + item.quantity, 0);\n  }\n  getCartTotal() {\n    return this.cartItems.reduce((total, item) => total + item.product.basePrice * item.quantity, 0);\n  }\n  updateCart() {\n    localStorage.setItem('cart', JSON.stringify(this.cartItems));\n    this.cartSubject.next(this.cartItems);\n  }\n  static {\n    this.ɵfac = function CartService_Factory(t) {\n      return new (t || CartService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: CartService,\n      factory: CartService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","cartItems","cartSubject","cart$","asObservable","storedCart","localStorage","getItem","JSON","parse","next","addToCart","product","quantity","size","color","existingItem","find","item","id","push","updateCart","removeFromCart","index","splice","updateQuantity","clearCart","getCartItems","getCartCount","reduce","total","getCartTotal","basePrice","setItem","stringify","factory","ɵfac","providedIn"],"sources":["C:\\Users\\everl\\OneDrive\\Escritorio\\JS\\app-gym\\front\\gymwear-frontend\\src\\app\\services\\cartservice.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { CartItem, Product } from '../models/models';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class CartService {\r\n    private cartItems: CartItem[] = [];\r\n    private cartSubject = new BehaviorSubject<CartItem[]>([]);\r\n    public cart$ = this.cartSubject.asObservable();\r\n\r\n    constructor() {\r\n        // Cargar carrito desde localStorage\r\n        const storedCart = localStorage.getItem('cart');\r\n        if (storedCart) {\r\n            this.cartItems = JSON.parse(storedCart);\r\n            this.cartSubject.next(this.cartItems);\r\n        }\r\n    }\r\n\r\n    addToCart(product: Product, quantity: number = 1, size?: string, color?: string): void {\r\n        const existingItem = this.cartItems.find(item =>\r\n            item.product.id === product.id &&\r\n            item.size === size &&\r\n            item.color === color\r\n        );\r\n\r\n        if (existingItem) {\r\n            existingItem.quantity += quantity;\r\n        } else {\r\n            this.cartItems.push({\r\n                product,\r\n                quantity,\r\n                size,\r\n                color\r\n            });\r\n        }\r\n\r\n        this.updateCart();\r\n    }\r\n\r\n    removeFromCart(index: number): void {\r\n        this.cartItems.splice(index, 1);\r\n        this.updateCart();\r\n    }\r\n\r\n    updateQuantity(index: number, quantity: number): void {\r\n        if (quantity <= 0) {\r\n            this.removeFromCart(index);\r\n        } else {\r\n            this.cartItems[index].quantity = quantity;\r\n            this.updateCart();\r\n        }\r\n    }\r\n\r\n    clearCart(): void {\r\n        this.cartItems = [];\r\n        this.updateCart();\r\n    }\r\n\r\n    getCartItems(): CartItem[] {\r\n        return this.cartItems;\r\n    }\r\n\r\n    getCartCount(): number {\r\n        return this.cartItems.reduce((total, item) => total + item.quantity, 0);\r\n    }\r\n\r\n    getCartTotal(): number {\r\n        return this.cartItems.reduce((total, item) =>\r\n            total + (item.product.basePrice * item.quantity), 0\r\n        );\r\n    }\r\n\r\n    private updateCart(): void {\r\n        localStorage.setItem('cart', JSON.stringify(this.cartItems));\r\n        this.cartSubject.next(this.cartItems);\r\n    }\r\n}"],"mappings":"AACA,SAASA,eAAe,QAAoB,MAAM;;AAMlD,OAAM,MAAOC,WAAW;EAKpBC,YAAA;IAJQ,KAAAC,SAAS,GAAe,EAAE;IAC1B,KAAAC,WAAW,GAAG,IAAIJ,eAAe,CAAa,EAAE,CAAC;IAClD,KAAAK,KAAK,GAAG,IAAI,CAACD,WAAW,CAACE,YAAY,EAAE;IAG1C;IACA,MAAMC,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IAC/C,IAAIF,UAAU,EAAE;MACZ,IAAI,CAACJ,SAAS,GAAGO,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC;MACvC,IAAI,CAACH,WAAW,CAACQ,IAAI,CAAC,IAAI,CAACT,SAAS,CAAC;;EAE7C;EAEAU,SAASA,CAACC,OAAgB,EAAEC,QAAA,GAAmB,CAAC,EAAEC,IAAa,EAAEC,KAAc;IAC3E,MAAMC,YAAY,GAAG,IAAI,CAACf,SAAS,CAACgB,IAAI,CAACC,IAAI,IACzCA,IAAI,CAACN,OAAO,CAACO,EAAE,KAAKP,OAAO,CAACO,EAAE,IAC9BD,IAAI,CAACJ,IAAI,KAAKA,IAAI,IAClBI,IAAI,CAACH,KAAK,KAAKA,KAAK,CACvB;IAED,IAAIC,YAAY,EAAE;MACdA,YAAY,CAACH,QAAQ,IAAIA,QAAQ;KACpC,MAAM;MACH,IAAI,CAACZ,SAAS,CAACmB,IAAI,CAAC;QAChBR,OAAO;QACPC,QAAQ;QACRC,IAAI;QACJC;OACH,CAAC;;IAGN,IAAI,CAACM,UAAU,EAAE;EACrB;EAEAC,cAAcA,CAACC,KAAa;IACxB,IAAI,CAACtB,SAAS,CAACuB,MAAM,CAACD,KAAK,EAAE,CAAC,CAAC;IAC/B,IAAI,CAACF,UAAU,EAAE;EACrB;EAEAI,cAAcA,CAACF,KAAa,EAAEV,QAAgB;IAC1C,IAAIA,QAAQ,IAAI,CAAC,EAAE;MACf,IAAI,CAACS,cAAc,CAACC,KAAK,CAAC;KAC7B,MAAM;MACH,IAAI,CAACtB,SAAS,CAACsB,KAAK,CAAC,CAACV,QAAQ,GAAGA,QAAQ;MACzC,IAAI,CAACQ,UAAU,EAAE;;EAEzB;EAEAK,SAASA,CAAA;IACL,IAAI,CAACzB,SAAS,GAAG,EAAE;IACnB,IAAI,CAACoB,UAAU,EAAE;EACrB;EAEAM,YAAYA,CAAA;IACR,OAAO,IAAI,CAAC1B,SAAS;EACzB;EAEA2B,YAAYA,CAAA;IACR,OAAO,IAAI,CAAC3B,SAAS,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEZ,IAAI,KAAKY,KAAK,GAAGZ,IAAI,CAACL,QAAQ,EAAE,CAAC,CAAC;EAC3E;EAEAkB,YAAYA,CAAA;IACR,OAAO,IAAI,CAAC9B,SAAS,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEZ,IAAI,KACrCY,KAAK,GAAIZ,IAAI,CAACN,OAAO,CAACoB,SAAS,GAAGd,IAAI,CAACL,QAAS,EAAE,CAAC,CACtD;EACL;EAEQQ,UAAUA,CAAA;IACdf,YAAY,CAAC2B,OAAO,CAAC,MAAM,EAAEzB,IAAI,CAAC0B,SAAS,CAAC,IAAI,CAACjC,SAAS,CAAC,CAAC;IAC5D,IAAI,CAACC,WAAW,CAACQ,IAAI,CAAC,IAAI,CAACT,SAAS,CAAC;EACzC;;;uBAvESF,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAAoC,OAAA,EAAXpC,WAAW,CAAAqC,IAAA;MAAAC,UAAA,EAFR;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}