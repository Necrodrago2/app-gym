{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ProductListComponent = class ProductListComponent {\n  constructor(productService, cartService, messageService, router) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.messageService = messageService;\n    this.router = router;\n    this.products = [];\n    this.filteredProducts = [];\n    this.categories = [];\n    this.selectedCategory = null;\n    this.loading = true;\n    this.searchTerm = '';\n    this.sortKey = '';\n    this.sortOptions = [{\n      label: 'Precio: Menor a Mayor',\n      value: 'price-asc'\n    }, {\n      label: 'Precio: Mayor a Menor',\n      value: 'price-desc'\n    }, {\n      label: 'Nombre: A-Z',\n      value: 'name-asc'\n    }, {\n      label: 'Nombre: Z-A',\n      value: 'name-desc'\n    }];\n    this.layout = 'grid';\n  }\n  ngOnInit() {\n    this.loadProducts();\n    this.loadCategories();\n  }\n  loadProducts() {\n    this.productService.getAllProducts().subscribe({\n      next: products => {\n        this.products = products;\n        this.filteredProducts = products;\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error al cargar productos:', error);\n        this.loading = false;\n        this.messageService.add({\n          severity: 'error',\n          summary: 'Error',\n          detail: 'No se pudieron cargar los productos'\n        });\n      }\n    });\n  }\n  loadCategories() {\n    this.productService.getAllCategories().subscribe({\n      next: categories => {\n        this.categories = categories;\n      },\n      error: error => {\n        console.error('Error al cargar categorías:', error);\n      }\n    });\n  }\n  filterByCategory(category) {\n    this.selectedCategory = category;\n    this.applyFilters();\n  }\n  onSearch() {\n    this.applyFilters();\n  }\n  applyFilters() {\n    let filtered = [...this.products];\n    // Filtrar por categoría\n    if (this.selectedCategory) {\n      filtered = filtered.filter(p => p.category.id === this.selectedCategory.id);\n    }\n    // Filtrar por búsqueda\n    if (this.searchTerm) {\n      const term = this.searchTerm.toLowerCase();\n      filtered = filtered.filter(p => p.name.toLowerCase().includes(term) || p.description.toLowerCase().includes(term));\n    }\n    this.filteredProducts = filtered;\n    this.applySort();\n  }\n  onSortChange(event) {\n    this.sortKey = event.value;\n    this.applySort();\n  }\n  applySort() {\n    if (!this.sortKey) return;\n    switch (this.sortKey) {\n      case 'price-asc':\n        this.filteredProducts.sort((a, b) => a.basePrice - b.basePrice);\n        break;\n      case 'price-desc':\n        this.filteredProducts.sort((a, b) => b.basePrice - a.basePrice);\n        break;\n      case 'name-asc':\n        this.filteredProducts.sort((a, b) => a.name.localeCompare(b.name));\n        break;\n      case 'name-desc':\n        this.filteredProducts.sort((a, b) => b.name.localeCompare(a.name));\n        break;\n    }\n  }\n  addToCart(product) {\n    this.cartService.addToCart(product, 1);\n    this.messageService.add({\n      severity: 'success',\n      summary: 'Éxito',\n      detail: `${product.name} agregado al carrito`\n    });\n  }\n  viewProduct(product) {\n    this.router.navigate(['/products', product.id]);\n  }\n  getSeverity(product) {\n    return product.active ? 'success' : 'danger';\n  }\n};\nProductListComponent = __decorate([Component({\n  selector: 'app-product-list',\n  templateUrl: './product-listcomponent.html',\n  styleUrls: ['./product-listcomponent.scss']\n})], ProductListComponent);\nexport { ProductListComponent };","map":{"version":3,"names":["Component","ProductListComponent","constructor","productService","cartService","messageService","router","products","filteredProducts","categories","selectedCategory","loading","searchTerm","sortKey","sortOptions","label","value","layout","ngOnInit","loadProducts","loadCategories","getAllProducts","subscribe","next","error","console","add","severity","summary","detail","getAllCategories","filterByCategory","category","applyFilters","onSearch","filtered","filter","p","id","term","toLowerCase","name","includes","description","applySort","onSortChange","event","sort","a","b","basePrice","localeCompare","addToCart","product","viewProduct","navigate","getSeverity","active","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\everl\\OneDrive\\Escritorio\\JS\\app-gym\\front\\gymwear-frontend\\src\\app\\components\\products\\product-list\\product-listcomponent.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Product, Category } from '../../../models/models';\r\nimport { ProductService } from '../../../services/productservice';\r\nimport { CartService } from '../../../services/cartservice';\r\nimport { MessageService } from 'primeng/api';\r\n\r\n@Component({\r\n    selector: 'app-product-list',\r\n    templateUrl: './product-listcomponent.html',\r\n    styleUrls: ['./product-listcomponent.scss']\r\n})\r\nexport class ProductListComponent implements OnInit {\r\n    products: Product[] = [];\r\n    filteredProducts: Product[] = [];\r\n    categories: Category[] = [];\r\n    selectedCategory: Category | null = null;\r\n    loading = true;\r\n    searchTerm = '';\r\n    sortKey = '';\r\n\r\n    sortOptions = [\r\n        { label: 'Precio: Menor a Mayor', value: 'price-asc' },\r\n        { label: 'Precio: Mayor a Menor', value: 'price-desc' },\r\n        { label: 'Nombre: A-Z', value: 'name-asc' },\r\n        { label: 'Nombre: Z-A', value: 'name-desc' }\r\n    ];\r\n\r\n    layout: 'grid' | 'list' = 'grid';\r\n\r\n    constructor(\r\n        private productService: ProductService,\r\n        private cartService: CartService,\r\n        private messageService: MessageService,\r\n        private router: Router\r\n    ) {}\r\n\r\n    ngOnInit(): void {\r\n        this.loadProducts();\r\n        this.loadCategories();\r\n    }\r\n\r\n    loadProducts(): void {\r\n        this.productService.getAllProducts().subscribe({\r\n            next: (products) => {\r\n                this.products = products;\r\n                this.filteredProducts = products;\r\n                this.loading = false;\r\n            },\r\n            error: (error) => {\r\n                console.error('Error al cargar productos:', error);\r\n                this.loading = false;\r\n                this.messageService.add({\r\n                    severity: 'error',\r\n                    summary: 'Error',\r\n                    detail: 'No se pudieron cargar los productos'\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    loadCategories(): void {\r\n        this.productService.getAllCategories().subscribe({\r\n            next: (categories) => {\r\n                this.categories = categories;\r\n            },\r\n            error: (error) => {\r\n                console.error('Error al cargar categorías:', error);\r\n            }\r\n        });\r\n    }\r\n\r\n    filterByCategory(category: Category | null): void {\r\n        this.selectedCategory = category;\r\n        this.applyFilters();\r\n    }\r\n\r\n    onSearch(): void {\r\n        this.applyFilters();\r\n    }\r\n\r\n    applyFilters(): void {\r\n        let filtered = [...this.products];\r\n\r\n        // Filtrar por categoría\r\n        if (this.selectedCategory) {\r\n            filtered = filtered.filter(p => p.category.id === this.selectedCategory!.id);\r\n        }\r\n\r\n        // Filtrar por búsqueda\r\n        if (this.searchTerm) {\r\n            const term = this.searchTerm.toLowerCase();\r\n            filtered = filtered.filter(p =>\r\n                p.name.toLowerCase().includes(term) ||\r\n                p.description.toLowerCase().includes(term)\r\n            );\r\n        }\r\n\r\n        this.filteredProducts = filtered;\r\n        this.applySort();\r\n    }\r\n\r\n    onSortChange(event: any): void {\r\n        this.sortKey = event.value;\r\n        this.applySort();\r\n    }\r\n\r\n    applySort(): void {\r\n        if (!this.sortKey) return;\r\n\r\n        switch (this.sortKey) {\r\n            case 'price-asc':\r\n                this.filteredProducts.sort((a, b) => a.basePrice - b.basePrice);\r\n                break;\r\n            case 'price-desc':\r\n                this.filteredProducts.sort((a, b) => b.basePrice - a.basePrice);\r\n                break;\r\n            case 'name-asc':\r\n                this.filteredProducts.sort((a, b) => a.name.localeCompare(b.name));\r\n                break;\r\n            case 'name-desc':\r\n                this.filteredProducts.sort((a, b) => b.name.localeCompare(a.name));\r\n                break;\r\n        }\r\n    }\r\n\r\n    addToCart(product: Product): void {\r\n        this.cartService.addToCart(product, 1);\r\n        this.messageService.add({\r\n            severity: 'success',\r\n            summary: 'Éxito',\r\n            detail: `${product.name} agregado al carrito`\r\n        });\r\n    }\r\n\r\n    viewProduct(product: Product): void {\r\n        this.router.navigate(['/products', product.id]);\r\n    }\r\n\r\n    getSeverity(product: Product): string {\r\n        return product.active ? 'success' : 'danger';\r\n    }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}